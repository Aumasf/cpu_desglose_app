<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Generar Desglose</title>
</head>
<body>
  <div style="display:flex; justify-content:space-between; align-items:center;">
    <h3>Generar PDF (modo prueba)</h3>
    <a href="/logout">Salir</a>
  </div>

  {% with messages = get_flashed_messages() %}
    {% if messages %}
      <ul>
        {% for m in messages %}
          <li style="color:red;">{{ m }}</li>
        {% endfor %}
      </ul>
    {% endif %}
  {% endwith %}

  <form method="post" action="/generate" enctype="multipart/form-data">
    <div>
      <label>Fecha:</label>
      <input type="date" name="fecha" required />
    </div>

    <div style="margin-top:10px;">
      <label>Excel de oferta:</label>
      <input type="file" name="excel" accept=".xlsx,.xls,.xlsm" required />
    </div>

    <div style="margin-top:10px;">
      <label>Logo (opcional):</label>
      <input type="file" name="logo" accept="image/*" />
    </div>

    <div style="margin-top:15px;">
      <button type="submit">Generar PDF</button>
    </div>
  </form>

  <hr>
  <p>
    Este modo prueba imprime solo: logo + (fecha, item, descripción) sobre el template PDF.
    Para ajustar posiciones, editá constantes en <code>services/pdf_builder.py</code>.
  </p>
</body>
</html>